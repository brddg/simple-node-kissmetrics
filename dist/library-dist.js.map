{"version":3,"sources":["library-dist.js"],"names":[],"mappings":"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","file":"library-dist.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  factory((global.kissmetrics = {}));\n}(this, function (exports) { 'use strict';\n\n  let loaded = false;\n  let key = null;\n  let injectedDoc = null;\n  let context = getGlobalContext();\n\n  /**\n   * Set the KISSmetrics API key\n   *\n   * @param newquay\n   */\n  function setKey(newquay) {\n    key = newquay;\n  }\n\n  /**\n   * Set the document, only used for passing\n   * in a mock for testing.\n   *\n   * @param newDocument\n   */\n  function setDocument(newDocument) {\n    injectedDoc = newDocument;\n  }\n\n  /**\n   * Get the document.  Allows us to inject a mock document\n   * for testing outside a browser env.\n   *\n   * @returns {*|HTMLDocument}\n   */\n  function getDocument() {\n    return injectedDoc || document;\n  }\n\n  /**\n   * KISSmetrics library requires a _kmq and _kmk variable\n   * on the window.  This function allows us to test this\n   * module outside of a browser environment.\n   *\n   * @returns {*}\n   */\n  function getGlobalContext() {\n    if (typeof window !== 'undefined') {\n      return window;\n    }\n    if (typeof global !== 'undefined') {\n      return global;\n    }\n    return {};\n  }\n\n  /**\n   * Load KISSmetrics scripts from their site.\n   *\n   * @param source\n   */\n  function loadExternalScript(source) {\n    setTimeout(function () {\n      const documentObj = getDocument();\n      const firstScript = documentObj.getElementsByTagName('script')[0];\n      let element = documentObj.createElement('script');\n      element.type = 'text/javascript';\n      element.async = true;\n      element.src = source;\n      firstScript.parentNode.insertBefore(element, firstScript);\n    }, 1);\n  }\n\n  /**\n   * Initial load of KISSmetrics\n   */\n  function setup() {\n    if (loaded) {\n      return;\n    }\n\n    if (!key) {\n      console.error('No key set for KISSmetrics, use setKey method to define it.');\n      return;\n    }\n\n    context._kmq = context._kmq || [];\n    context._kmk = context._kmk || key;\n    loadExternalScript('//i.kissmetrics.com/i.js');\n    loadExternalScript('//scripts.kissmetrics.com/' + key + '.2.js');\n\n    loaded = true;\n  }\n\n  /**\n   * Track an event in KISSmetrics\n   * @param name\n   * @param eventProps\n   */\n  function trackEvent(name, eventProps) {\n    setup();\n    context._kmq.push(['record', name, eventProps]);\n  }\n\n  /**\n   * Set a user property in KISSmetrics\n   *\n   * @param userProps\n   */\n  function setUserProperties(userProps) {\n    setup();\n    context._kmq.push(['set', userProps]);\n  }\n\n  /**\n   * Set an identity in KISSmetrics\n   *\n   * @param userProps\n   */\n  function identify(identity) {\n    setup();\n    context._kmq.push(['identify', identity]);\n  }\n\n  /**\n   * Clear an identity in KISSmetrics\n   */\n  function clearIdentity(identity) {\n    setup();\n    context._kmq.push(['clearIdentity']);\n  }\n\n  var index = {\n    trackEvent, setKey, setUserProperties, setup, identify, clearIdentity\n  };\n\n  exports.setKey = setKey;\n  exports.setDocument = setDocument;\n  exports.setup = setup;\n  exports.trackEvent = trackEvent;\n  exports.setUserProperties = setUserProperties;\n  exports.identify = identify;\n  exports.clearIdentity = clearIdentity;\n  exports['default'] = index;\n\n}));"]}